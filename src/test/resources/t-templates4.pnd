P(x) : int

template Foo<X> {
    Q(x) : int
    P(x) <- Q(x), P@X(x)
}

Foo<_> as F1
Foo<F1> as F2

Res(x) <- P@F2(x)